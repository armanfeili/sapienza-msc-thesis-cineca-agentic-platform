<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36" version="29.3.4">
  <diagram name="Page-1" id="o7U-nxtfvU7QnVVJ9hKv">
    <mxGraphModel grid="1" page="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" pageScale="1" pageWidth="850" pageHeight="1100" background="#ffffff" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-1" edge="1" parent="1" source="-zAXcNhFpfNaQYtVMxQg-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="-zAXcNhFpfNaQYtVMxQg-22">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-2" parent="1" style="swimlane;whiteSpace=wrap;html=1;startSize=40;fillColor=#E0DDEF;" value="&lt;div&gt;IDENTITY &amp;amp; AUTHENTICATION LAYER:&amp;nbsp;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;CLIENTS &amp;amp; USER INTERFACES&lt;/span&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="540" width="570" x="70" y="130" as="geometry">
            <mxRectangle height="30" width="140" x="470" y="210" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-3" parent="-zAXcNhFpfNaQYtVMxQg-2" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;align=center;fillColor=#F3F0FF;" value="&lt;div style=&quot;&quot;&gt;&lt;b&gt;Identity Provider (OIDC / Auth0)&lt;/b&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="160" width="550" x="10" y="50" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-4" parent="-zAXcNhFpfNaQYtVMxQg-3" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;- OAuth 2.0 login flow&lt;/div&gt;&lt;div&gt;- JWT tokens (tenant_id, sub, roles[], scopes[], exp, iat)&lt;/div&gt;&lt;div&gt;- JWKS endpoint for token verification&lt;/div&gt;&lt;div&gt;- Token refresh &amp;amp; revocation&lt;/div&gt;&lt;div&gt;- Principal:&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;sub, tenant_id,&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;roles: [admin, operator, user, viewer],&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;scopes: [read, write, graph:read, ...]&lt;/div&gt;" vertex="1">
          <mxGeometry height="130" width="550" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-5" parent="-zAXcNhFpfNaQYtVMxQg-2" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#F3F0FF;" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;div&gt;&lt;b&gt;Agent Chat UI (Next.js / React)&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="210" width="550" x="10" y="220" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-6" parent="-zAXcNhFpfNaQYtVMxQg-5" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;&lt;div&gt;&lt;br class=&quot;Apple-interchange-newline&quot;&gt;[AGENT RUN - WORKFLOW A]&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;- End user chat interface&lt;/div&gt;&lt;div&gt;- JWT-based authentication&lt;/div&gt;&lt;div&gt;- SSE Streaming support&lt;/div&gt;&lt;div&gt;- Agent runs &amp;amp; steps display&lt;/div&gt;&lt;div&gt;- Real-time polling for updates&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;font-size: 11px; text-wrap-mode: nowrap;&quot;&gt;POST /v1/agent-runs&lt;/div&gt;&lt;div style=&quot;font-size: 11px; text-wrap-mode: nowrap;&quot;&gt;- Bearer JWT, prompt, model, temperature&lt;/div&gt;&lt;div style=&quot;font-size: 11px; text-wrap-mode: nowrap;&quot;&gt;- Returns: {run_id, status: &quot;queued&quot;}&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="180" width="550" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-7" parent="-zAXcNhFpfNaQYtVMxQg-2" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#F3F0FF;" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;div&gt;&lt;b&gt;Reverse Proxy / API Gateway (NGINX)&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="90" width="550" x="10" y="440" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-8" parent="-zAXcNhFpfNaQYtVMxQg-7" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;-&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;TLS termination (HTTPS)&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;- Routing to backend services&lt;/div&gt;&lt;div&gt;- CORS handling&lt;/div&gt;&lt;div&gt;-&amp;nbsp;Load balancing&amp;nbsp;&lt;/div&gt;" vertex="1">
          <mxGeometry height="60" width="550" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-9" edge="1" parent="1" source="-zAXcNhFpfNaQYtVMxQg-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" target="-zAXcNhFpfNaQYtVMxQg-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-10" parent="1" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#D7E4D7;" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;div&gt;&lt;b&gt;API LAYER (Routers)&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="240" width="570" x="70" y="750" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-11" parent="-zAXcNhFpfNaQYtVMxQg-10" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;- /v1/health&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- Health probes (live, ready, startup, components)&lt;/div&gt;&lt;div&gt;- /v1/auth&amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- Token introspection, identity verification&lt;/div&gt;&lt;div&gt;- /v1/agents&amp;nbsp; &amp;nbsp; &amp;nbsp;- Agent definitions and configurations&lt;/div&gt;&lt;div&gt;- /v1/agent-runs - Agent run lifecycle (create, poll, cancel)&lt;/div&gt;&lt;div&gt;- /v1/tools&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- MCP tool registry and invocation&lt;/div&gt;&lt;div&gt;- /v1/jobs&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- Async job lifecycle (create, stream, cancel)&lt;/div&gt;&lt;div&gt;- /v1/models&amp;nbsp; &amp;nbsp;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- Model and provider management&lt;/div&gt;&lt;div&gt;- /v1/admin&amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- Administrative operations&lt;/div&gt;&lt;div&gt;- /v1/tenants&amp;nbsp; &amp;nbsp;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- Multi-tenant configuration&lt;/div&gt;&lt;div&gt;- /v1/sessions&amp;nbsp;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- Session management&lt;/div&gt;&lt;div&gt;- /v1/graph&amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- Graph query endpoints&lt;/div&gt;&lt;div&gt;- /v1/batch&amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- Batch operations&lt;/div&gt;&lt;div&gt;- /v1/export&amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- Data export utilities&lt;/div&gt;&lt;div&gt;- /v1/internal&amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- Internal diagnostics&lt;/div&gt;" vertex="1">
          <mxGeometry height="210" width="570" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-12" edge="1" parent="1" source="-zAXcNhFpfNaQYtVMxQg-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" target="-zAXcNhFpfNaQYtVMxQg-16">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-13" parent="1" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#EAF7EA;" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;div&gt;&lt;b&gt;[AGENT RUN ENDPOINTS]&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="100" width="570" x="70" y="1070" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-14" parent="-zAXcNhFpfNaQYtVMxQg-13" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;- POST /v1/agent-runs (use_jobs=false → BackgroundTasks)&lt;/div&gt;&lt;div&gt;- POST /v1/agent-runs?use_jobs=true (→ Jobs Worker)&lt;/div&gt;&lt;div&gt;- GET /v1/agent-runs/{id} (ETag support for caching)&lt;/div&gt;&lt;div&gt;- GET /v1/agent-runs/{id}/steps&lt;/div&gt;" vertex="1">
          <mxGeometry height="70" width="570" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-15" edge="1" parent="1" source="-zAXcNhFpfNaQYtVMxQg-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="-zAXcNhFpfNaQYtVMxQg-42">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-16" parent="1" style="swimlane;whiteSpace=wrap;html=1;fillColor=#EBDFBC;" value="&lt;div&gt;SERVICE LAYER&lt;/div&gt;" vertex="1">
          <mxGeometry height="700" width="570" x="70" y="1220" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-17" parent="-zAXcNhFpfNaQYtVMxQg-16" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#FFF2CC;" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;ORCHESTRATOR&amp;nbsp;&lt;/b&gt;&lt;b&gt;SERVICE&lt;/b&gt;&lt;b&gt;: 1 Run per prompt,&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: transparent; text-align: center;&quot;&gt;&lt;b&gt;4 Phases&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="500" width="550" x="10" y="40" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-18" parent="-zAXcNhFpfNaQYtVMxQg-17" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;&lt;b&gt;PHASE 1) INTENT CLASSIFICATION:&lt;/b&gt;&lt;/div&gt;&lt;div&gt;- A&lt;span style=&quot;background-color: transparent;&quot;&gt;nalyzes prompt via LLM&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;- Check params.category → Match prompt catalog → Apply classify_intent()&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp; - CHAT - Conversational responses&lt;/div&gt;&lt;div&gt;&amp;nbsp; - GRAPH - Analytics, NL-&amp;gt;Cypher queries&lt;/div&gt;&lt;div&gt;&amp;nbsp; - SECURITY - Security/permissions questions&lt;/div&gt;&lt;div&gt;&amp;nbsp; - ADMIN - Administrative write operations&lt;/div&gt;&lt;div&gt;&amp;nbsp; - DANGEROUS - Destructive ops → refuse + offer EXPLAIN&lt;/div&gt;&lt;div&gt;&amp;nbsp; - EXPLAIN - EXPLAIN-only query analysis&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;b&gt;PHASE 2) TODO Planning&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&amp;nbsp;(multi-step run):&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;&quot;&gt;- LLM-based planning&lt;/div&gt;&lt;div style=&quot;&quot;&gt;- Input: Goal + Context + Schema → Output: TODO Array&lt;/div&gt;&lt;div style=&quot;&quot;&gt;- Planning Modes: full (LLM per TODO) | optional (try direct) | none (deterministic)&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;b&gt;PHASE 3) Step Execution,&amp;nbsp;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;FOR EACH TODO&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;:&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; 1. Call LLM Provider (planner, reflector, responder)&lt;/div&gt;&lt;div&gt;&amp;nbsp; 2. Invoke MCP Tools with RBAC check (34 tools available)&lt;/div&gt;&lt;div&gt;&amp;nbsp; 3. If GRAPH mode: NL-&amp;gt;Cypher pipeline&lt;/div&gt;&lt;div&gt;&amp;nbsp; 4. Persist step → PostgreSQL&amp;nbsp;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;(via adaptor)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; 5. Use Redis for session/cache/cancel&amp;nbsp;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;(via adaptor)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;- Step records: {id, action, input, output, latency_ms, started_at, finished_at}&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;b&gt;PHASE 4)&amp;nbsp;&lt;/b&gt;&lt;b style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Finalization &amp;amp;&amp;nbsp;&lt;/b&gt;&lt;b style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Response Generation&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;- build_response() → Orchestration Result&lt;/div&gt;&lt;div&gt;- Response mode selection: fallback-only | llm-best-effort&lt;/div&gt;&lt;div&gt;- Canonical output structure: {goal, steps[], outputs[], todos[], metrics}&lt;/div&gt;&lt;div&gt;- Normalize final output: text + optional JSON payload&lt;/div&gt;&lt;div&gt;- Safety/compliance: PII scrubbing + output guard checks&lt;/div&gt;&lt;div&gt;- Persist final state + metrics → PostgreSQL&lt;/div&gt;&lt;div&gt;- Observability: emit Prometheus metrics + OpenTelemetry traces&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="470" width="550" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-19" parent="-zAXcNhFpfNaQYtVMxQg-16" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#FFF2CC;" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;ADDITIONAL SERVICES&lt;/b&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="120" width="550" x="10" y="560" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-20" parent="-zAXcNhFpfNaQYtVMxQg-19" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;- Session Service (state management)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;- Job Service (job lifecycle)&lt;/div&gt;&lt;div&gt;- Default Model Resolver&lt;/div&gt;&lt;div&gt;- Health / ETL / Archive Services&lt;/div&gt;&lt;div&gt;- Invocation Store (audit trail)&lt;/div&gt;" vertex="1">
          <mxGeometry height="90" width="550" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-21" edge="1" parent="1" source="-zAXcNhFpfNaQYtVMxQg-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.75;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" target="-zAXcNhFpfNaQYtVMxQg-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-22" parent="1" style="swimlane;whiteSpace=wrap;html=1;fillColor=#EAD6D6;" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;SECURITY&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: transparent; text-align: center;&quot;&gt;MIDDLEWARE STACK&lt;/span&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="1050" width="930" x="720" y="130" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-23" parent="-zAXcNhFpfNaQYtVMxQg-22" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;align=center;fillColor=#FFE9E9;" value="&lt;div style=&quot;&quot;&gt;&lt;div&gt;&lt;b&gt;1. CORS Handler - Cross-Origin Resource Sharing policy enforcement&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="90" width="910" x="10" y="40" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-24" parent="-zAXcNhFpfNaQYtVMxQg-23" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;- Allowed origins, methods, headers configuration&lt;/div&gt;&lt;div&gt;- Preflight OPTIONS request handling&lt;/div&gt;&lt;div&gt;- Credentials and expose headers support&lt;/div&gt;" vertex="1">
          <mxGeometry height="60" width="910" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-25" parent="-zAXcNhFpfNaQYtVMxQg-22" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;align=center;fillColor=#FFE9E9;" value="&lt;div style=&quot;&quot;&gt;&lt;div&gt;&lt;b&gt;2. Trace Context - OpenTelemetry distributed tracing context&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="90" width="910" x="10" y="140" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-26" parent="-zAXcNhFpfNaQYtVMxQg-25" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;- Injects/extracts W3C trace-context headers (traceparent, tracestate)&lt;/div&gt;&lt;div&gt;- Creates root span if missing, propagates existing trace&lt;/div&gt;&lt;div&gt;- Adds trace_id, span_id, parent_id to request context&lt;/div&gt;" vertex="1">
          <mxGeometry height="60" width="910" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-27" parent="-zAXcNhFpfNaQYtVMxQg-22" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;align=center;fillColor=#FFE9E9;" value="&lt;div style=&quot;&quot;&gt;&lt;div&gt;&lt;b&gt;3. Auth JWT - JWT/OIDC token validation and principal extraction&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="110" width="910" x="10" y="240" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-28" parent="-zAXcNhFpfNaQYtVMxQg-27" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;- Validates Bearer token via JWKS endpoint (RS256/RS384/RS512)&lt;/div&gt;&lt;div&gt;- Extracts claims: sub, tenant_id, roles[], scopes[], exp, iat&lt;/div&gt;&lt;div&gt;&lt;div&gt;- RBAC &amp;amp; Scope Enforcement for endpoints&lt;/div&gt;&lt;/div&gt;&lt;div&gt;- Builds Principal object for downstream authorization&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;- Rejects expired/invalid/malformed tokens with 401 Unauthorized&lt;/div&gt;" vertex="1">
          <mxGeometry height="80" width="910" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-29" parent="-zAXcNhFpfNaQYtVMxQg-22" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;align=center;fillColor=#FFE9E9;" value="&lt;div style=&quot;&quot;&gt;&lt;div&gt;&lt;b&gt;4. Rate Limit - Redis-backed rate limiting with multiple dimensions&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="110" width="910" x="10" y="470" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-30" parent="-zAXcNhFpfNaQYtVMxQg-29" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;- Per-user limits: ratelimit:user:{sub}&lt;/div&gt;&lt;div&gt;- Per-tenant limits: ratelimit:tenant:{tenant_id}&lt;/div&gt;&lt;div&gt;- Per-endpoint limits: ratelimit:endpoint:{method}:{path}&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;- Sliding window algorithm, returns 429 Too Many Requests when exceeded&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;- X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset headers&lt;/div&gt;" vertex="1">
          <mxGeometry height="80" width="910" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-31" parent="-zAXcNhFpfNaQYtVMxQg-22" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;align=center;fillColor=#FFE9E9;" value="&lt;div style=&quot;&quot;&gt;&lt;div&gt;&lt;b&gt;5. Tenant Resolver - Multi-tenancy isolation and context resolution&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="100" width="910" x="10" y="600" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-32" parent="-zAXcNhFpfNaQYtVMxQg-31" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;- Resolves tenant configuration from Redis cache or PostgreSQL&lt;/div&gt;&lt;div&gt;- Injects tenant_id filter into all database queries&lt;/div&gt;&lt;div&gt;- Enforces data isolation between tenants&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;- Loads tenant-specific settings (model defaults, feature flags)&lt;/div&gt;" vertex="1">
          <mxGeometry height="70" width="910" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-33" parent="-zAXcNhFpfNaQYtVMxQg-22" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;align=center;fillColor=#FFE9E9;" value="&lt;div style=&quot;&quot;&gt;&lt;div&gt;&lt;b&gt;6. Input Guard - Request payload validation and sanitization&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="100" width="910" x="10" y="710" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-34" parent="-zAXcNhFpfNaQYtVMxQg-33" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;- Pydantic schema validation for all request bodies&lt;/div&gt;&lt;div&gt;- Injection prevention (SQL, Cypher, command injection patterns)&lt;/div&gt;&lt;div&gt;- Content-type validation and size limits&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;- Malicious payload detection&lt;/div&gt;" vertex="1">
          <mxGeometry height="70" width="910" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-35" parent="-zAXcNhFpfNaQYtVMxQg-22" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;align=center;fillColor=#FFE9E9;" value="&lt;div style=&quot;&quot;&gt;&lt;b&gt;7. Output Guard - Response sanitization and compliance&lt;/b&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="100" width="910" x="10" y="820" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-36" parent="-zAXcNhFpfNaQYtVMxQg-35" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;- PII scrubbing (email redaction, phone masking, SSN removal)&lt;/div&gt;&lt;div&gt;- Content filtering for sensitive data patterns&lt;/div&gt;&lt;div&gt;- Response size validation and truncation&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;- Audit logging of all responses with correlation IDs&lt;/div&gt;" vertex="1">
          <mxGeometry height="70" width="910" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-37" parent="-zAXcNhFpfNaQYtVMxQg-22" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;align=center;fillColor=#FFE9E9;" value="&lt;div style=&quot;&quot;&gt;&lt;div&gt;&lt;b&gt;8. Error Handler - Centralized exception handling and error response formatting&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="100" width="910" x="10" y="930" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-38" parent="-zAXcNhFpfNaQYtVMxQg-37" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;- PII scrubbing (email redaction, phone masking, SSN removal)&lt;/div&gt;&lt;div&gt;- Content filtering for sensitive data patterns&lt;/div&gt;&lt;div&gt;- Response size validation and truncation&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;- Audit logging of all responses with correlation IDs&lt;/div&gt;" vertex="1">
          <mxGeometry height="70" width="910" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-39" parent="-zAXcNhFpfNaQYtVMxQg-22" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#FFE9E9;" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;div&gt;&lt;b&gt;RBAC PERMISSION MATRIX&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="100" width="910" x="10" y="360" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-40" parent="-zAXcNhFpfNaQYtVMxQg-39" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;- admin:&amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;agent-runs=CRUD,&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;jobs=CRUD,&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;tools=CRUD,&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;tenants=CRUD,&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;graph(write)=✓&lt;/div&gt;&lt;div&gt;- operator: &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;agent-runs=CRU,&amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;jobs=CRUD, &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;tools=R,&amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;tenants=R,&amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;graph(write)=✗&lt;/div&gt;&lt;div&gt;- user:&amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;agent-runs=CR,&amp;nbsp; &amp;nbsp;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;jobs=CRD,&amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;tools=R,&amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;tenants=✗,&amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;graph(write)=✗&lt;/div&gt;&lt;div&gt;- viewer:&amp;nbsp; &amp;nbsp;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;agent-runs=R,&amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;jobs=R,&amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;tools=R,&amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;tenants=✗,&amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;graph(write)=✗&lt;/div&gt;" vertex="1">
          <mxGeometry height="70" width="910" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-41" edge="1" parent="1" source="-zAXcNhFpfNaQYtVMxQg-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" target="-zAXcNhFpfNaQYtVMxQg-57">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-42" parent="1" style="swimlane;whiteSpace=wrap;html=1;fillColor=#EBDED4;" value="&lt;b style=&quot;text-align: left;&quot;&gt;PHASE 3: Step Execution,&amp;nbsp;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;FOR EACH TODO&lt;/span&gt;&lt;/b&gt;" vertex="1">
          <mxGeometry height="855" width="930" x="720" y="1220" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-43" parent="-zAXcNhFpfNaQYtVMxQg-42" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FFF1E6;" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;Step 1) LLM PROVIDERS&lt;/span&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="230" width="910" x="10" y="45" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-44" parent="-zAXcNhFpfNaQYtVMxQg-43" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#FFF1E6;" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;div&gt;&lt;b&gt;OpenAI&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="80" width="430" x="10" y="140" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-45" parent="-zAXcNhFpfNaQYtVMxQg-44" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;- Cloud LLM API&lt;/span&gt;&lt;/div&gt;&lt;div&gt;- GPT-4, GPT-3.5, etc.&lt;/div&gt;" vertex="1">
          <mxGeometry height="50" width="430" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-46" parent="-zAXcNhFpfNaQYtVMxQg-43" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#FFF1E6;" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;div&gt;&lt;b&gt;Ollama (Local)&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="90" width="890" x="10" y="40" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-47" parent="-zAXcNhFpfNaQYtVMxQg-46" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;&lt;div&gt;- Local LLM hosting&lt;/div&gt;&lt;div&gt;- Self-hosted models:&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;(phi3:mini,&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Mistral,&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;LLaMA,&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Qwen,&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Gemma)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="60" width="890" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-48" parent="-zAXcNhFpfNaQYtVMxQg-43" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;align=center;fillColor=#FFF1E6;" value="&lt;div style=&quot;&quot;&gt;&lt;b&gt;Azure OpenAI / Other Providers&lt;/b&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="80" width="450" x="450" y="140" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-49" parent="-zAXcNhFpfNaQYtVMxQg-48" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;- Compatible OpenAI-style APIs&lt;/span&gt;&lt;/div&gt;&lt;div&gt;- Enterprise deployments&lt;/div&gt;" vertex="1">
          <mxGeometry height="50" width="450" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-50" parent="-zAXcNhFpfNaQYtVMxQg-42" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#FFF1E6;" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;div&gt;Step 2) MCP RUNTIME &amp;amp; TOOLS (34 Tools, 12 Categories)&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="370" width="910" x="10" y="290" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-51" parent="-zAXcNhFpfNaQYtVMxQg-50" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;&lt;div&gt;- Tool Registry (PostgreSQL-backed manifests)&lt;/div&gt;&lt;div&gt;- Tool Policies (RBAC per tool, required_scopes)&lt;/div&gt;&lt;div&gt;- MCP Runtime (ToolContext, audit logging)&lt;/div&gt;&lt;div&gt;- Tool Invocation:&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;Request → Schema Validation → RBAC Check → Execute → Audit Log&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;b&gt;Tool Categories:&lt;/b&gt;&lt;/div&gt;&lt;div&gt;- GRAPH&amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- query, secure_query, generate_cypher, schema, explain&lt;/div&gt;&lt;div&gt;- SECURITY &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- describe_principal, allowed_operations, validate&lt;/div&gt;&lt;div&gt;- SYSTEM&amp;nbsp; &amp;nbsp;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- health, metrics, config, status&lt;/div&gt;&lt;div&gt;- CACHE&amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- get, set, delete, invalidate&lt;/div&gt;&lt;div&gt;- CATALOG&amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- discover, describe, search&lt;/div&gt;&lt;div&gt;- MODEL&amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- list, info, warmup, switch&lt;/div&gt;&lt;div&gt;- AGENT&amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- context, history, state&lt;/div&gt;&lt;div&gt;- ANALYTICS &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- query, aggregate, visualize&lt;/div&gt;&lt;div&gt;- ADMIN&amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- create_index, drop_index, constraint&lt;/div&gt;&lt;div&gt;- ETL&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;/span&gt;- import, export, transform&lt;/div&gt;&lt;div&gt;- CRUD&amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- create_node, update_node, delete_node&lt;/div&gt;&lt;div&gt;- EXPORT&amp;nbsp; &amp;nbsp;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- csv, json, cypher&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;Tool Manifest (from PostgreSQL):&lt;/div&gt;&lt;div&gt;{name, description, input_schema, required_scopes,&amp;nbsp;&lt;/div&gt;&lt;div&gt;rate_limit: {requests: 100, window: 60}}&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="340" width="910" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-52" parent="-zAXcNhFpfNaQYtVMxQg-42" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;align=center;fillColor=#FFF1E6;" value="&lt;div style=&quot;&quot;&gt;&lt;div&gt;&lt;b&gt;Step 3) NL&amp;nbsp;&lt;span style=&quot;text-align: left;&quot;&gt;→&lt;/span&gt;&amp;nbsp;CYPHER PIPELINE&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="160" width="910" x="10" y="675" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-53" parent="-zAXcNhFpfNaQYtVMxQg-52" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;&lt;span style=&quot;text-align: center;&quot;&gt;[In case of GRAPH mode]&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-align: center;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;1. Normalize NL prompt → standardize user question&lt;/div&gt;&lt;div&gt;2. Generate Cypher → LLM-based or test hints&lt;/div&gt;&lt;div&gt;3. Validate Safety → read-only enforcement, tenant boundaries, injection prevention&lt;/div&gt;&lt;div&gt;4. Execute on Memgraph → run validated Cypher query&lt;/div&gt;&lt;div&gt;5. Summarize Results → convert graph results to natural language&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="130" width="910" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-54" parent="1" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#DAE4E6;" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;PHASE 4) Agent Run Completion&lt;/b&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="120" width="930" x="720" y="3030" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-55" parent="-zAXcNhFpfNaQYtVMxQg-54" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;- State machine: queued → running → succeeded | failed&lt;/span&gt;&lt;/div&gt;&lt;div&gt;- Record provenance event for the completed run&lt;/div&gt;&lt;div&gt;- Build API payload: AgentRunResponse {id, status, outputs[], steps[], todos[], metrics}&lt;/div&gt;&lt;div&gt;- Return HTTP response to client&lt;/div&gt;&lt;div&gt;- UI polling for updates: GET /agent-runs/{id} (ETag support)&lt;/div&gt;" vertex="1">
          <mxGeometry height="90" width="930" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-56" edge="1" parent="1" source="-zAXcNhFpfNaQYtVMxQg-57" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" target="-zAXcNhFpfNaQYtVMxQg-54">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-57" parent="1" style="swimlane;whiteSpace=wrap;html=1;fillColor=#D7ECE9;" value="&lt;b style=&quot;text-align: left;&quot;&gt;Step 4 &amp;amp; 5)&lt;/b&gt;" vertex="1">
          <mxGeometry height="850" width="930" x="720" y="2130" as="geometry">
            <mxRectangle height="30" width="100" x="540" y="2570" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-58" parent="-zAXcNhFpfNaQYtVMxQg-57" style="swimlane;whiteSpace=wrap;html=1;fillColor=#EAFFFB;" value="ADAPTERS &amp;amp; RESILIENCE FRAMEWORK" vertex="1">
          <mxGeometry height="320" width="910" x="10" y="40" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-59" parent="-zAXcNhFpfNaQYtVMxQg-58" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#EAFFFB;" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;LLM Adapters&lt;/b&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="110" width="333.75" x="16.25" y="40" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-60" parent="-zAXcNhFpfNaQYtVMxQg-59" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;- Ollama adapter (local LLMs)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;- OpenAI-style API adapter&lt;/span&gt;&lt;/div&gt;&lt;div&gt;- Stub/Demo adapter (testing)&lt;/div&gt;&lt;div&gt;- Azure OpenAI adapter&lt;/div&gt;" vertex="1">
          <mxGeometry height="80" width="333.75" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-61" parent="-zAXcNhFpfNaQYtVMxQg-58" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#EAFFFB;" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;Resilience Mechanisms&lt;/b&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="110" width="540" x="360" y="40" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-62" parent="-zAXcNhFpfNaQYtVMxQg-61" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;- Circuit Breaker States per provider:&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;CLOSED (normal) → OPEN (reject) → HALF_OPEN (test one) → CLOSED&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;- Automatic Retries with exponential backoff&lt;/span&gt;&lt;/div&gt;&lt;div&gt;- Cost Tracking per provider/model&lt;/div&gt;&lt;div&gt;- Provider Fallback chain&lt;/div&gt;" vertex="1">
          <mxGeometry height="80" width="540" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-63" parent="-zAXcNhFpfNaQYtVMxQg-58" style="swimlane;whiteSpace=wrap;html=1;fillColor=#EAFFFB;" value="Database Adapters" vertex="1">
          <mxGeometry height="150" width="883.75" x="16.25" y="160" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-64" parent="-zAXcNhFpfNaQYtVMxQg-63" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;align=center;fillColor=#EAFFFB;" value="&lt;div style=&quot;&quot;&gt;&lt;div&gt;&lt;b&gt;Redis Adapter&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="100" width="80" x="93.75" y="40" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-65" parent="-zAXcNhFpfNaQYtVMxQg-64" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;- cache&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;- queues&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;- rate limits&lt;/span&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="70" width="80" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-66" parent="-zAXcNhFpfNaQYtVMxQg-63" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;align=center;fillColor=#EAFFFB;" value="&lt;div style=&quot;&quot;&gt;&lt;b&gt;PostgreSQL Adapter&lt;/b&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="100" width="90" x="403.75" y="40" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-67" parent="-zAXcNhFpfNaQYtVMxQg-66" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;- repositories&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;- transactions&lt;/span&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="70" width="90" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-68" parent="-zAXcNhFpfNaQYtVMxQg-63" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;align=center;fillColor=#EAFFFB;" value="&lt;div style=&quot;&quot;&gt;&lt;div&gt;&lt;b&gt;Memgraph Adapter&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="100" width="100" x="693.75" y="40" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-69" parent="-zAXcNhFpfNaQYtVMxQg-68" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;- graph queries&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;- NL-&amp;gt;Cypher&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="70" width="100" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-70" parent="-zAXcNhFpfNaQYtVMxQg-57" style="swimlane;whiteSpace=wrap;html=1;fillColor=#EADFE9;" value="DATA &amp;amp; INFRASTRUCTURE LAYER" vertex="1">
          <mxGeometry height="460" width="910" x="10" y="380" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-71" parent="-zAXcNhFpfNaQYtVMxQg-70" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#EADFE9;" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;PostgreSQL&lt;/b&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="240" width="280" x="330" y="40" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-72" parent="-zAXcNhFpfNaQYtVMxQg-71" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;&lt;div&gt;&lt;b&gt;Tables:&lt;/b&gt;&lt;/div&gt;&lt;div&gt;- tenants&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- Multi-tenant configurations&lt;/div&gt;&lt;div&gt;- agent_runs&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- Agent run records with status&lt;/div&gt;&lt;div&gt;- steps&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- Per-step execution records&lt;/div&gt;&lt;div&gt;- sessions&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- User session state&lt;/div&gt;&lt;div&gt;- jobs&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;/span&gt;- Async job records&lt;/div&gt;&lt;div&gt;- job_events&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- Job progress events&lt;/div&gt;&lt;div&gt;- tool_manifests&amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- MCP tool definitions&lt;/div&gt;&lt;div&gt;- model_defaults&amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- Default model configurations&lt;/div&gt;&lt;div&gt;- audit_logs&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- All action audit trail&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;SQLAlchemy + Alembic migrations&lt;/div&gt;&lt;div&gt;Used by: App (Background Tasks)&amp;nbsp;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;+ Workers&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="210" width="280" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-73" parent="-zAXcNhFpfNaQYtVMxQg-70" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#EADFE9;" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;div&gt;&lt;b&gt;Memgraph (Graph Database)&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="410" width="280" x="620" y="40" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-74" parent="-zAXcNhFpfNaQYtVMxQg-73" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;b&gt;Nodes:&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;- (:User&amp;nbsp;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;/span&gt;{id, name, email})&lt;/div&gt;&lt;div&gt;- (:Task &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;/span&gt;{id, title, status})&lt;/div&gt;&lt;div&gt;- (:File &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;/span&gt;{id, name, path})&lt;/div&gt;&lt;div&gt;- (:Institution &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;{id, name})&lt;/div&gt;&lt;div&gt;- (:Project &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;{id, name})&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Relationships:&lt;/b&gt;&lt;/div&gt;&lt;div&gt;- (User)-[:ASSIGNED_TO]-&amp;gt;(Task)&lt;/div&gt;&lt;div&gt;- (User)-[:OWNS]-&amp;gt;(File)&lt;/div&gt;&lt;div&gt;- (User)-[:BELONGS_TO]-&amp;gt;(Institution)&lt;/div&gt;&lt;div&gt;- (Task)-[:PART_OF]-&amp;gt;(Project)&lt;/div&gt;&lt;div&gt;- (File)-[:ATTACHED_TO]-&amp;gt;(Task)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;NL-&amp;gt;Cypher Pipeline Components:&lt;/b&gt;&lt;/div&gt;&lt;div&gt;- NL normalization (standardize user question)&lt;/div&gt;&lt;div&gt;- Cypher generation (LLM-based or test hints)&lt;/div&gt;&lt;div&gt;- Safety validation (read-only, tenant boundaries, injection prevention)&lt;/div&gt;&lt;div&gt;- Query execution (run validated Cypher)&lt;/div&gt;&lt;div&gt;- Result summarization (convert to natural language)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Used by: NL-&amp;gt;Cypher, graph.* tools, analytics,&amp;nbsp;ETL jobs&lt;/div&gt;" vertex="1">
          <mxGeometry height="380" width="280" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-75" parent="-zAXcNhFpfNaQYtVMxQg-70" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#EADFE9;" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;Redis (Cache &amp;amp; Queues)&lt;/b&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="330" width="310" x="10" y="40" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-76" parent="-zAXcNhFpfNaQYtVMxQg-75" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;b&gt;CACHE:&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;- session:{id}&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;/span&gt;- Session data&lt;/div&gt;&lt;div&gt;- tenant:config:{id}&amp;nbsp; &amp;nbsp;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- Tenant configurations&lt;/div&gt;&lt;div&gt;- model:defaults:{id} &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- Model defaults&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;b&gt;QUEUES:&lt;/b&gt;&lt;/div&gt;&lt;div&gt;- jobs:queue:{type}&amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- Job queue (LPUSH/BRPOP)&lt;/div&gt;&lt;div&gt;- jobs:events:{id}&amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- SSE event buffer (ring)&lt;/div&gt;&lt;div&gt;- jobs:state:{id}&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- Job state (HASH)&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;RATE LIMITING:&lt;/b&gt;&lt;/div&gt;&lt;div&gt;- ratelimit:user:{id}&amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- Per-user limits&lt;/div&gt;&lt;div&gt;- ratelimit:tenant:{id}&amp;nbsp; &amp;nbsp;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- Per-tenant limits&lt;/div&gt;&lt;div&gt;- ratelimit:endpoint:{}&amp;nbsp; &amp;nbsp;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- Per-endpoint limits&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;CONTROL:&lt;/b&gt;&lt;/div&gt;&lt;div&gt;- idempotency:{key}&amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- Idempotency mapping&lt;/div&gt;&lt;div&gt;- circuit:{provider}&amp;nbsp; &amp;nbsp;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;/span&gt;- Circuit breaker state&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Used by: App (Background Tasks) + Workers&lt;/div&gt;" vertex="1">
          <mxGeometry height="300" width="310" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-77" parent="1" style="swimlane;whiteSpace=wrap;html=1;fillColor=#E0E0E0;" value="&lt;b style=&quot;text-align: left;&quot;&gt;BACKGROUND FRAMEWORK&lt;/b&gt;" vertex="1">
          <mxGeometry height="900" width="570" x="70" y="2130" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-78" parent="-zAXcNhFpfNaQYtVMxQg-77" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#F3F3F3;" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;div&gt;&lt;b&gt;APScheduler&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="110" width="550" x="10" y="40" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-79" parent="-zAXcNhFpfNaQYtVMxQg-78" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;Scheduled Tasks&lt;/div&gt;&lt;div&gt;- Health check (30s): Postgres ping, Redis ping, Memgraph ping, LLM warmup/availability&lt;/div&gt;&lt;div&gt;- Cleanup (hourly): stale/old sessions, expired/stale cache, expired jobs, old job records, orphan runs&lt;/div&gt;&lt;div&gt;- Backup (daily): PostgreSQL dump, Redis RDB snapshot, Memgraph archives, audit logs export&lt;/div&gt;&lt;div&gt;- Provider monitoring: provider health + metrics emission&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="80" width="550" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-80" parent="-zAXcNhFpfNaQYtVMxQg-77" style="swimlane;whiteSpace=wrap;html=1;fillColor=#E0E0E0;" value="&lt;b style=&quot;text-align: left;&quot;&gt;OBSERVABILITY &amp;amp; MONITORING&lt;/b&gt;" vertex="1">
          <mxGeometry height="730" width="550" x="10" y="160" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-81" parent="-zAXcNhFpfNaQYtVMxQg-80" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;gradientColor=none;fillColor=#F3F3F3;" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;b&gt;Prometheus (Metrics Collection)&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="190" width="530" x="10" y="530" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-82" parent="-zAXcNhFpfNaQYtVMxQg-81" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;- Scrapes /metrics from: app &amp;amp; workers&lt;/span&gt;&lt;/div&gt;&lt;div&gt;- Metrics collected:&lt;/div&gt;&lt;div&gt;&amp;nbsp; - HTTP request latency &amp;amp; throughput&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Agent run / step execution metrics&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Tool invocation metrics&lt;/div&gt;&lt;div&gt;&amp;nbsp; - LLM token usage &amp;amp; cost&lt;/div&gt;&lt;div&gt;&amp;nbsp; - LLM provider health / circuit breaker states&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Job processing metrics&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Job queue depths&lt;/div&gt;&lt;div&gt;&amp;nbsp; - System health status&lt;/div&gt;" vertex="1">
          <mxGeometry height="160" width="530" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-83" parent="-zAXcNhFpfNaQYtVMxQg-80" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;gradientColor=none;fillColor=#F3F3F3;" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;b&gt;Grafana (Dashboards)&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="140" width="530" x="10" y="380" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-84" parent="-zAXcNhFpfNaQYtVMxQg-83" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;- Dashboards for:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; - HTTP request metrics&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Agent run statistics (runs/steps)&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Job processing &amp;amp; queue metrics&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Tool invocation stats&lt;/div&gt;&lt;div&gt;&amp;nbsp; - LLM provider health &amp;amp; circuit breaker states&lt;/div&gt;&lt;div&gt;&amp;nbsp; - System / component health status&lt;/div&gt;" vertex="1">
          <mxGeometry height="110" width="530" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-85" parent="-zAXcNhFpfNaQYtVMxQg-80" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;gradientColor=none;fillColor=#F3F3F3;" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;Instrumentation &amp;amp; Endpoints&lt;/b&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="150" width="530" x="10" y="40" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-86" parent="-zAXcNhFpfNaQYtVMxQg-85" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;- Prometheus /metrics endpoint (exposed by app &amp;amp; workers)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;- OpenTelemetry tracing (OTLP export from app &amp;amp; workers)&lt;/div&gt;&lt;div&gt;- Structured logging (JSON format)&lt;/div&gt;&lt;div&gt;- Health endpoints:&lt;/div&gt;&lt;div&gt;&amp;nbsp; - /v1/health/live&lt;/div&gt;&lt;div&gt;&amp;nbsp; - /v1/health/ready&lt;/div&gt;&lt;div&gt;&amp;nbsp; - /v1/health/startup&lt;/div&gt;&lt;div&gt;&amp;nbsp; - /v1/health/components&lt;/div&gt;" vertex="1">
          <mxGeometry height="120" width="530" y="30" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-87" parent="-zAXcNhFpfNaQYtVMxQg-80" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;gradientColor=none;fillColor=#F3F3F3;" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;b&gt;Tracing (OTel Collector + APM Backend)&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="170" width="530" x="10" y="200" as="geometry" />
        </mxCell>
        <mxCell id="-zAXcNhFpfNaQYtVMxQg-88" parent="-zAXcNhFpfNaQYtVMxQg-87" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" value="&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;- OTel Collector / APM:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Receives OTLP traces from: app &amp;amp; workers&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Exports to: Jaeger / Tempo / APM backend&lt;/div&gt;&lt;div&gt;- Trace spans include:&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Agent run execution (end-to-end)&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Step-by-step processing&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Tool invocations&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Database queries&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Job lifecycle (enqueue → execute → complete/fail/cancel)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="140" width="530" y="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
